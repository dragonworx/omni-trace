{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8a868fdeaa78d07f701c","webpack:///./node_modules/safe-buffer/index.js","webpack:///./node_modules/ws/lib/PerMessageDeflate.js","webpack:///./node_modules/ws/lib/Constants.js","webpack:///external \"crypto\"","webpack:///./node_modules/ws/lib/BufferUtil.js","webpack:///./node_modules/ws/lib/WebSocket.js","webpack:///external \"events\"","webpack:///./node_modules/ultron/index.js","webpack:///external \"http\"","webpack:///external \"url\"","webpack:///./node_modules/bindings/bindings.js","webpack:///./node_modules/bindings","webpack:///./node_modules/ws/lib/Extensions.js","webpack:///./node_modules/ws/lib/Receiver.js","webpack:///./node_modules/ws/lib/ErrorCodes.js","webpack:///./node_modules/ws/lib/Sender.js","webpack:///./src/server/index.js","webpack:///./node_modules/ws/index.js","webpack:///external \"https\"","webpack:///external \"buffer\"","webpack:///./node_modules/async-limiter/index.js","webpack:///external \"zlib\"","webpack:///./node_modules/bufferutil/index.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./node_modules/bufferutil/fallback.js","webpack:///./node_modules/ws/lib/EventTarget.js","webpack:///./node_modules/ws/lib/Validation.js","webpack:///./node_modules/utf-8-validate/index.js","webpack:///./node_modules/utf-8-validate/fallback.js","webpack:///./node_modules/ws/lib/WebSocketServer.js"],"names":["buffer","require","Buffer","copyProps","src","dst","key","from","alloc","allocUnsafe","allocUnsafeSlow","module","exports","SafeBuffer","arg","encodingOrOffset","length","TypeError","size","fill","encoding","buf","undefined","SlowBuffer","safeBuffer","Limiter","zlib","bufferUtil","TRAILER","EMPTY_BLOCK","kWriteInProgress","Symbol","kPendingClose","kTotalLength","kCallback","kBuffers","kError","kOwner","zlibLimiter","PerMessageDeflate","options","isServer","maxPayload","_maxPayload","_options","_threshold","threshold","_isServer","_deflate","_inflate","params","concurrency","concurrencyLimit","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","paramsList","normalizeParams","acceptAsServer","acceptAsClient","close","accepted","result","some","Error","map","Object","keys","forEach","value","parseInt","Number","isNaN","Z_MIN_WINDOWBITS","Z_MAX_WINDOWBITS","data","fin","callback","push","done","_decompress","err","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","on","inflateOnError","inflateOnData","write","flush","concat","process","nextTick","createDeflateRaw","memLevel","level","Z_SYNC_FLUSH","deflateOnData","slice","chunk","closeCode","removeListener","reset","BINARY_TYPES","GUID","EMPTY_BUFFER","NOOP","list","totalLength","target","offset","i","copy","assign","BufferUtil","e","mask","source","output","unmask","EventEmitter","crypto","Ultron","https","http","url","EventTarget","Extensions","constants","Receiver","Sender","protocolVersions","closeTimeout","WebSocket","address","protocols","Array","isArray","readyState","CONNECTING","bytesReceived","extensions","protocol","_binaryType","_finalize","finalize","bind","_closeFrameReceived","_closeFrameSent","_closeMessage","_closeTimer","_finalized","_closeCode","_receiver","_sender","_socket","_ultron","initAsServerClient","call","initAsClient","socket","head","setTimeout","setNoDelay","binaryType","unshift","add","onmessage","emit","onping","pong","onpong","onclose","code","reason","onerror","error","CLOSING","OPEN","emitClose","clearTimeout","destroy","end","cleanup","CLOSED","extensionName","removeAllListeners","pause","resume","_req","abort","failSilently","toString","ping","cb","opts","binary","compress","send","amount","bufferSize","_bufferedBytes","type","indexOf","method","defineProperty","prototype","get","listeners","_listener","set","listener","addEventListener","removeEventListener","protocolVersion","setSocket","join","perMessageDeflate","handshakeTimeout","localAddress","headers","family","origin","agent","host","checkServerIdentity","rejectUnauthorized","passphrase","ciphers","ecdhCurve","cert","pfx","ca","serverUrl","parse","isUnixSocket","path","isSecure","randomBytes","httpObj","requestOptions","port","hostname","format","offer","Origin","Host","auth","parts","split","socketPath","charAt","Agent","aborted","res","statusCode","digest","createHash","update","serverProt","protList","protError","serverExtensions","accept","has","hasOwnProperty","id","ee","event","fn","context","__ultron","once","remove","args","arguments","eventNames","_events","getOwnPropertySymbols","j","fs","dirname","exists","accessSync","existsSync","defaults","arrow","env","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","platform","arch","version","versions","node","bindings","try","module_root","getRoot","getFileName","extname","tries","l","n","b","apply","p","test","message","a","calling_file","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","fileName","st","__filename","captureStackTrace","stack","file","dir","prev","cwd","tokenChars","dest","name","elem","header","offers","mustUnescape","isEscaping","inQuotes","paramName","start","charCodeAt","replace","token","k","v","isValidUTF8","ErrorCodes","GET_INFO","GET_PAYLOAD_LENGTH_16","GET_PAYLOAD_LENGTH_64","GET_MASK","GET_DATA","INFLATING","_extensions","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_mask","_opcode","_totalPayloadLength","_messageLength","_fragments","_cleanupCallback","_hadError","_dead","_loop","_state","bytes","shift","startLoop","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","hasBufferedBytes","readBuffer","compressed","haveLength","readUInt16BE","num","readUInt32BE","Math","pow","maxPayloadExceeded","controlMessage","decompress","pushFragment","dataMessage","messageLength","fragments","toBuffer","toArrayBuffer","isValidErrorCode","fullLength","fragment","byteOffset","byteLength","_firstFragment","_deflating","_queue","writeUInt16BE","enqueue","doClose","sendFrame","frame","rsv1","opcode","readOnly","isBuffer","ArrayBuffer","isView","viewToBuffer","doPing","doPong","dispatch","_","dequeue","merge","payloadLength","writeUInt32BE","view","wss","clientId","server","Promise","resolve","reject","Server","connection","ws","console","log","isAlive","heartbeat","msg","JSON","isClosed","cmd","stringify","terminate","pollPurgeBrokenConnections","intervalMs","interval","setInterval","clients","Queue","Infinity","pending","jobs","cbs","_done","arrayAddMethods","methodResult","_run","job","pop","onDone","Event","MessageEvent","CloseEvent","wasClean","OpenEvent","onMessage","onClose","onError","onOpen","Validation","len","WebSocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","req","body","STATUS_CODES","writeHead","listen","handleUpgrade","client","Set","pathname","socketError","upgrade","toLowerCase","shouldHandle","abortConnection","info","secure","authorized","encrypted","verified","completeUpgrade","readable","writable","delete"],"mappings":"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","file":"server.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trace\"] = factory();\n\telse\n\t\troot[\"trace\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8a868fdeaa78d07f701c","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/safe-buffer/index.js","'use strict';\n\nconst safeBuffer = require('safe-buffer');\nconst Limiter = require('async-limiter');\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./BufferUtil');\n\nconst Buffer = safeBuffer.Buffer;\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst EMPTY_BLOCK = Buffer.from([0x00]);\n\nconst kWriteInProgress = Symbol('write-in-progress');\nconst kPendingClose = Symbol('pending-close');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\nconst kOwner = Symbol('owner');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} options.serverNoContextTakeover Request/accept disabling\n   *     of server context takeover\n   * @param {Boolean} options.clientNoContextTakeover Advertise/acknowledge\n   *     disabling of client context takeover\n   * @param {(Boolean|Number)} options.serverMaxWindowBits Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} options.clientMaxWindowBits Advertise support\n   *     for, or request, a custom client window size\n   * @param {Number} options.level The value of zlib's `level` param\n   * @param {Number} options.memLevel The value of zlib's `memLevel` param\n   * @param {Number} options.threshold Size (in bytes) below which messages\n   *     should not be compressed\n   * @param {Number} options.concurrencyLimit The number of concurrent calls to\n   *     zlib\n   * @param {Boolean} isServer Create the instance in either server or client\n   *     mode\n   * @param {Number} maxPayload The maximum allowed message length\n   */\n  constructor (options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold = this._options.threshold !== undefined\n      ? this._options.threshold\n      : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency = this._options.concurrencyLimit !== undefined\n        ? this._options.concurrencyLimit\n        : 10;\n      zlibLimiter = new Limiter({ concurrency });\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName () {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create extension parameters offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer () {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept extension offer.\n   *\n   * @param {Array} paramsList Extension parameters\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept (paramsList) {\n    paramsList = this.normalizeParams(paramsList);\n\n    var params;\n    if (this._isServer) {\n      params = this.acceptAsServer(paramsList);\n    } else {\n      params = this.acceptAsClient(paramsList);\n    }\n\n    this.params = params;\n    return params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup () {\n    if (this._inflate) {\n      if (this._inflate[kWriteInProgress]) {\n        this._inflate[kPendingClose] = true;\n      } else {\n        this._inflate.close();\n        this._inflate = null;\n      }\n    }\n    if (this._deflate) {\n      if (this._deflate[kWriteInProgress]) {\n        this._deflate[kPendingClose] = true;\n      } else {\n        this._deflate.close();\n        this._deflate = null;\n      }\n    }\n  }\n\n  /**\n   * Accept extension offer from client.\n   *\n   * @param {Array} paramsList Extension parameters\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer (paramsList) {\n    const accepted = {};\n    const result = paramsList.some((params) => {\n      if (\n        (this._options.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (this._options.serverMaxWindowBits === false &&\n          params.server_max_window_bits) ||\n        (typeof this._options.serverMaxWindowBits === 'number' &&\n          typeof params.server_max_window_bits === 'number' &&\n          this._options.serverMaxWindowBits > params.server_max_window_bits) ||\n        (typeof this._options.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return;\n      }\n\n      if (\n        this._options.serverNoContextTakeover ||\n        params.server_no_context_takeover\n      ) {\n        accepted.server_no_context_takeover = true;\n      }\n      if (\n        this._options.clientNoContextTakeover ||\n        (this._options.clientNoContextTakeover !== false &&\n          params.client_no_context_takeover)\n      ) {\n        accepted.client_no_context_takeover = true;\n      }\n      if (typeof this._options.serverMaxWindowBits === 'number') {\n        accepted.server_max_window_bits = this._options.serverMaxWindowBits;\n      } else if (typeof params.server_max_window_bits === 'number') {\n        accepted.server_max_window_bits = params.server_max_window_bits;\n      }\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        accepted.client_max_window_bits = this._options.clientMaxWindowBits;\n      } else if (\n        this._options.clientMaxWindowBits !== false &&\n        typeof params.client_max_window_bits === 'number'\n      ) {\n        accepted.client_max_window_bits = params.client_max_window_bits;\n      }\n      return true;\n    });\n\n    if (!result) throw new Error(\"Doesn't support the offered configuration\");\n\n    return accepted;\n  }\n\n  /**\n   * Accept extension response from server.\n   *\n   * @param {Array} paramsList Extension parameters\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient (paramsList) {\n    const params = paramsList[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Invalid value for \"client_no_context_takeover\"');\n    }\n\n    if (\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        (!params.client_max_window_bits ||\n          params.client_max_window_bits > this._options.clientMaxWindowBits)) ||\n      (this._options.clientMaxWindowBits === false &&\n        params.client_max_window_bits)\n    ) {\n      throw new Error('Invalid value for \"client_max_window_bits\"');\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize extensions parameters.\n   *\n   * @param {Array} paramsList Extension parameters\n   * @return {Array} Normalized extensions parameters\n   * @private\n   */\n  normalizeParams (paramsList) {\n    return paramsList.map((params) => {\n      Object.keys(params).forEach((key) => {\n        var value = params[key];\n        if (value.length > 1) {\n          throw new Error(`Multiple extension parameters for ${key}`);\n        }\n\n        value = value[0];\n\n        switch (key) {\n          case 'server_no_context_takeover':\n          case 'client_no_context_takeover':\n            if (value !== true) {\n              throw new Error(`invalid extension parameter value for ${key} (${value})`);\n            }\n            params[key] = true;\n            break;\n          case 'server_max_window_bits':\n          case 'client_max_window_bits':\n            if (typeof value === 'string') {\n              value = parseInt(value, 10);\n              if (\n                Number.isNaN(value) ||\n                value < zlib.Z_MIN_WINDOWBITS ||\n                value > zlib.Z_MAX_WINDOWBITS\n              ) {\n                throw new Error(`invalid extension parameter value for ${key} (${value})`);\n              }\n            }\n            if (!this._isServer && value === true) {\n              throw new Error(`Missing extension parameter value for ${key}`);\n            }\n            params[key] = value;\n            break;\n          default:\n            throw new Error(`Not defined extension parameter (${key})`);\n        }\n      });\n      return params;\n    });\n  }\n\n  /**\n   * Decompress data. Concurrency limited by async-limiter.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress (data, fin, callback) {\n    zlibLimiter.push((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited by async-limiter.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress (data, fin, callback) {\n    zlibLimiter.push((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress (data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits = typeof this.params[key] !== 'number'\n        ? zlib.Z_DEFAULT_WINDOWBITS\n        : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({ windowBits });\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate[kOwner] = this;\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n    this._inflate[kWriteInProgress] = true;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (\n        (fin && this.params[`${endpoint}_no_context_takeover`]) ||\n        this._inflate[kPendingClose]\n      ) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kWriteInProgress] = false;\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress (data, fin, callback) {\n    if (!data || data.length === 0) {\n      process.nextTick(callback, null, EMPTY_BLOCK);\n      return;\n    }\n\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits = typeof this.params[key] !== 'number'\n        ? zlib.Z_DEFAULT_WINDOWBITS\n        : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        memLevel: this._options.memLevel,\n        level: this._options.level,\n        flush: zlib.Z_SYNC_FLUSH,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // `zlib.DeflateRaw` emits an `'error'` event only when an attempt to use\n      // it is made after it has already been closed. This cannot happen here,\n      // so we only add a listener for the `'data'` event.\n      //\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kWriteInProgress] = true;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      var data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      if (\n        (fin && this.params[`${endpoint}_no_context_takeover`]) ||\n        this._deflate[kPendingClose]\n      ) {\n        this._deflate.close();\n        this._deflate = null;\n      } else {\n        this._deflate[kWriteInProgress] = false;\n        this._deflate[kTotalLength] = 0;\n        this._deflate[kBuffers] = [];\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData (chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData (chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kOwner]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kOwner]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new Error('max payload size exceeded');\n  this[kError].closeCode = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError (err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kOwner]._inflate = null;\n  this[kCallback](err);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/PerMessageDeflate.js","'use strict';\n\nconst safeBuffer = require('safe-buffer');\n\nconst Buffer = safeBuffer.Buffer;\n\nexports.BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nexports.GUID = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11';\nexports.EMPTY_BUFFER = Buffer.alloc(0);\nexports.NOOP = () => {};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/Constants.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 3\n// module chunks = 0","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst safeBuffer = require('safe-buffer');\n\nconst Buffer = safeBuffer.Buffer;\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nconst concat = (list, totalLength) => {\n  const target = Buffer.allocUnsafe(totalLength);\n  var offset = 0;\n\n  for (var i = 0; i < list.length; i++) {\n    const buf = list[i];\n    buf.copy(target, offset);\n    offset += buf.length;\n  }\n\n  return target;\n};\n\ntry {\n  const bufferUtil = require('bufferutil');\n\n  module.exports = Object.assign({ concat }, bufferUtil.BufferUtil || bufferUtil);\n} catch (e) /* istanbul ignore next */ {\n  /**\n   * Masks a buffer using the given mask.\n   *\n   * @param {Buffer} source The buffer to mask\n   * @param {Buffer} mask The mask to use\n   * @param {Buffer} output The buffer where to store the result\n   * @param {Number} offset The offset at which to start writing\n   * @param {Number} length The number of bytes to mask.\n   * @public\n   */\n  const mask = (source, mask, output, offset, length) => {\n    for (var i = 0; i < length; i++) {\n      output[offset + i] = source[i] ^ mask[i & 3];\n    }\n  };\n\n  /**\n   * Unmasks a buffer using the given mask.\n   *\n   * @param {Buffer} buffer The buffer to unmask\n   * @param {Buffer} mask The mask to use\n   * @public\n   */\n  const unmask = (buffer, mask) => {\n    // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n    const length = buffer.length;\n    for (var i = 0; i < length; i++) {\n      buffer[i] ^= mask[i & 3];\n    }\n  };\n\n  module.exports = { concat, mask, unmask };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/BufferUtil.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst Ultron = require('ultron');\nconst https = require('https');\nconst http = require('http');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst EventTarget = require('./EventTarget');\nconst Extensions = require('./Extensions');\nconst constants = require('./Constants');\nconst Receiver = require('./Receiver');\nconst Sender = require('./Sender');\n\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000; // Allow 30 seconds to terminate the connection cleanly.\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {String} address The URL to which to connect\n   * @param {(String|String[])} protocols The subprotocols\n   * @param {Object} options Connection options\n   */\n  constructor (address, protocols, options) {\n    super();\n\n    if (!protocols) {\n      protocols = [];\n    } else if (typeof protocols === 'string') {\n      protocols = [protocols];\n    } else if (!Array.isArray(protocols)) {\n      options = protocols;\n      protocols = [];\n    }\n\n    this.readyState = WebSocket.CONNECTING;\n    this.bytesReceived = 0;\n    this.extensions = {};\n    this.protocol = '';\n\n    this._binaryType = constants.BINARY_TYPES[0];\n    this._finalize = this.finalize.bind(this);\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._finalized = false;\n    this._closeCode = 1006;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n    this._ultron = null;\n\n    if (Array.isArray(address)) {\n      initAsServerClient.call(this, address[0], address[1], options);\n    } else {\n      initAsClient.call(this, address, protocols, options);\n    }\n  }\n\n  get CONNECTING () { return WebSocket.CONNECTING; }\n  get CLOSING () { return WebSocket.CLOSING; }\n  get CLOSED () { return WebSocket.CLOSED; }\n  get OPEN () { return WebSocket.OPEN; }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount () {\n    var amount = 0;\n\n    if (this._socket) {\n      amount = this._socket.bufferSize + this._sender._bufferedBytes;\n    }\n    return amount;\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the required\n   * default \"blob\" type (instead we define a custom \"nodebuffer\" type).\n   *\n   * @type {String}\n   */\n  get binaryType () {\n    return this._binaryType;\n  }\n\n  set binaryType (type) {\n    if (constants.BINARY_TYPES.indexOf(type) < 0) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @private\n   */\n  setSocket (socket, head) {\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    this._receiver = new Receiver(this.extensions, this._maxPayload, this.binaryType);\n    this._sender = new Sender(socket, this.extensions);\n    this._ultron = new Ultron(socket);\n    this._socket = socket;\n\n    this._ultron.on('close', this._finalize);\n    this._ultron.on('error', this._finalize);\n    this._ultron.on('end', this._finalize);\n\n    if (head.length > 0) socket.unshift(head);\n\n    this._ultron.on('data', (data) => {\n      this.bytesReceived += data.length;\n      this._receiver.add(data);\n    });\n\n    this._receiver.onmessage = (data) => this.emit('message', data);\n    this._receiver.onping = (data) => {\n      this.pong(data, !this._isServer, true);\n      this.emit('ping', data);\n    };\n    this._receiver.onpong = (data) => this.emit('pong', data);\n    this._receiver.onclose = (code, reason) => {\n      this._closeFrameReceived = true;\n      this._closeMessage = reason;\n      this._closeCode = code;\n      if (!this._finalized) this.close(code, reason);\n    };\n    this._receiver.onerror = (error, code) => {\n      this._closeMessage = '';\n      this._closeCode = code;\n\n      //\n      // Ensure that the error is emitted even if `WebSocket#finalize()` has\n      // already been called.\n      //\n      this.readyState = WebSocket.CLOSING;\n      this.emit('error', error);\n      this.finalize(true);\n    };\n\n    this.readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Clean up and release internal resources.\n   *\n   * @param {(Boolean|Error)} error Indicates whether or not an error occurred\n   * @private\n   */\n  finalize (error) {\n    if (this._finalized) return;\n\n    this.readyState = WebSocket.CLOSING;\n    this._finalized = true;\n\n    if (typeof error === 'object') this.emit('error', error);\n    if (!this._socket) return this.emitClose();\n\n    clearTimeout(this._closeTimer);\n    this._closeTimer = null;\n\n    this._ultron.destroy();\n    this._ultron = null;\n\n    this._socket.on('error', constants.NOOP);\n\n    if (!error) this._socket.end();\n    else this._socket.destroy();\n\n    this._socket = null;\n    this._sender = null;\n\n    this._receiver.cleanup(() => this.emitClose());\n    this._receiver = null;\n  }\n\n  /**\n   * Emit the `close` event.\n   *\n   * @private\n   */\n  emitClose () {\n    this.readyState = WebSocket.CLOSED;\n\n    this.emit('close', this._closeCode, this._closeMessage);\n\n    if (this.extensions[PerMessageDeflate.extensionName]) {\n      this.extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this.extensions = null;\n\n    this.removeAllListeners();\n  }\n\n  /**\n   * Pause the socket stream.\n   *\n   * @public\n   */\n  pause () {\n    if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');\n\n    this._socket.pause();\n  }\n\n  /**\n   * Resume the socket stream\n   *\n   * @public\n   */\n  resume () {\n    if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');\n\n    this._socket.resume();\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *            +----------+     +-----------+   +----------+\n   *     + - - -|ws.close()|---->|close frame|-->|ws.close()|- - - -\n   *            +----------+     +-----------+   +----------+       |\n   *     |      +----------+     +-----------+         |\n   *            |ws.close()|<----|close frame|<--------+            |\n   *            +----------+     +-----------+         |\n   *  CLOSING         |              +---+             |         CLOSING\n   *                  |          +---|fin|<------------+\n   *     |            |          |   +---+                          |\n   *                  |          |   +---+      +-------------+\n   *     |            +----------+-->|fin|----->|ws.finalize()| - - +\n   *                             |   +---+      +-------------+\n   *     |     +-------------+   |\n   *      - - -|ws.finalize()|<--+\n   *           +-------------+\n   *\n   * @param {Number} code Status code explaining why the connection is closing\n   * @param {String} data A string explaining why the connection is closing\n   * @public\n   */\n  close (code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      this._req.abort();\n      this.finalize(new Error('closed before the connection is established'));\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this.readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (!this._finalized) {\n        if (this._closeFrameReceived) this._socket.end();\n\n        //\n        // Ensure that the connection is cleaned up even when the closing\n        // handshake fails.\n        //\n        this._closeTimer = setTimeout(this._finalize, closeTimeout, true);\n      }\n    });\n  }\n\n  /**\n   * Send a ping message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Boolean} failSilently Indicates whether or not to throw if `readyState` isn't `OPEN`\n   * @public\n   */\n  ping (data, mask, failSilently) {\n    if (this.readyState !== WebSocket.OPEN) {\n      if (failSilently) return;\n      throw new Error('not opened');\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || constants.EMPTY_BUFFER, mask);\n  }\n\n  /**\n   * Send a pong message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Boolean} failSilently Indicates whether or not to throw if `readyState` isn't `OPEN`\n   * @public\n   */\n  pong (data, mask, failSilently) {\n    if (this.readyState !== WebSocket.OPEN) {\n      if (failSilently) return;\n      throw new Error('not opened');\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || constants.EMPTY_BUFFER, mask);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when data is written out\n   * @public\n   */\n  send (data, options, cb) {\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      if (cb) cb(new Error('not opened'));\n      else throw new Error('not opened');\n      return;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    const opts = Object.assign({\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true\n    }, options);\n\n    if (!this.extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || constants.EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate () {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      this._req.abort();\n      this.finalize(new Error('closed before the connection is established'));\n      return;\n    }\n\n    this.finalize(true);\n  }\n}\n\nWebSocket.CONNECTING = 0;\nWebSocket.OPEN = 1;\nWebSocket.CLOSING = 2;\nWebSocket.CLOSED = 3;\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get () {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set (listener) {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = EventTarget.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket server client.\n *\n * @param {http.IncomingMessage} req The request object\n * @param {net.Socket} socket The network socket between the server and client\n * @param {Buffer} head The first packet of the upgraded stream\n * @param {Object} options WebSocket attributes\n * @param {Number} options.protocolVersion The WebSocket protocol version\n * @param {Object} options.extensions The negotiated extensions\n * @param {Number} options.maxPayload The maximum allowed message size\n * @param {String} options.protocol The chosen subprotocol\n * @private\n */\nfunction initAsServerClient (socket, head, options) {\n  this.protocolVersion = options.protocolVersion;\n  this._maxPayload = options.maxPayload;\n  this.extensions = options.extensions;\n  this.protocol = options.protocol;\n\n  this._isServer = true;\n\n  this.setSocket(socket, head);\n}\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {String} address The URL to which to connect\n * @param {String[]} protocols The list of subprotocols\n * @param {Object} options Connection options\n * @param {String} options.protocol Value of the `Sec-WebSocket-Protocol` header\n * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n * @param {Number} options.handshakeTimeout Timeout in milliseconds for the handshake request\n * @param {String} options.localAddress Local interface to bind for network connections\n * @param {Number} options.protocolVersion Value of the `Sec-WebSocket-Version` header\n * @param {Object} options.headers An object containing request headers\n * @param {String} options.origin Value of the `Origin` or `Sec-WebSocket-Origin` header\n * @param {http.Agent} options.agent Use the specified Agent\n * @param {String} options.host Value of the `Host` header\n * @param {Number} options.family IP address family to use during hostname lookup (4 or 6).\n * @param {Function} options.checkServerIdentity A function to validate the server hostname\n * @param {Boolean} options.rejectUnauthorized Verify or not the server certificate\n * @param {String} options.passphrase The passphrase for the private key or pfx\n * @param {String} options.ciphers The ciphers to use or exclude\n * @param {String} options.ecdhCurve The curves for ECDH key agreement to use or exclude\n * @param {(String|String[]|Buffer|Buffer[])} options.cert The certificate key\n * @param {(String|String[]|Buffer|Buffer[])} options.key The private key\n * @param {(String|Buffer)} options.pfx The private key, certificate, and CA certs\n * @param {(String|String[]|Buffer|Buffer[])} options.ca Trusted certificates\n * @private\n */\nfunction initAsClient (address, protocols, options) {\n  options = Object.assign({\n    protocolVersion: protocolVersions[1],\n    protocol: protocols.join(','),\n    perMessageDeflate: true,\n    handshakeTimeout: null,\n    localAddress: null,\n    headers: null,\n    family: null,\n    origin: null,\n    agent: null,\n    host: null,\n\n    //\n    // SSL options.\n    //\n    checkServerIdentity: null,\n    rejectUnauthorized: null,\n    passphrase: null,\n    ciphers: null,\n    ecdhCurve: null,\n    cert: null,\n    key: null,\n    pfx: null,\n    ca: null\n  }, options);\n\n  if (protocolVersions.indexOf(options.protocolVersion) === -1) {\n    throw new Error(\n      `unsupported protocol version: ${options.protocolVersion} ` +\n      `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  this.protocolVersion = options.protocolVersion;\n  this._isServer = false;\n  this.url = address;\n\n  const serverUrl = url.parse(address);\n  const isUnixSocket = serverUrl.protocol === 'ws+unix:';\n\n  if (!serverUrl.host && (!isUnixSocket || !serverUrl.path)) {\n    throw new Error('invalid url');\n  }\n\n  const isSecure = serverUrl.protocol === 'wss:' || serverUrl.protocol === 'https:';\n  const key = crypto.randomBytes(16).toString('base64');\n  const httpObj = isSecure ? https : http;\n  var perMessageDeflate;\n\n  const requestOptions = {\n    port: serverUrl.port || (isSecure ? 443 : 80),\n    host: serverUrl.hostname,\n    path: '/',\n    headers: {\n      'Sec-WebSocket-Version': options.protocolVersion,\n      'Sec-WebSocket-Key': key,\n      'Connection': 'Upgrade',\n      'Upgrade': 'websocket'\n    }\n  };\n\n  if (options.headers) Object.assign(requestOptions.headers, options.headers);\n  if (options.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      options.perMessageDeflate !== true ? options.perMessageDeflate : {},\n      false\n    );\n    requestOptions.headers['Sec-WebSocket-Extensions'] = Extensions.format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (options.protocol) {\n    requestOptions.headers['Sec-WebSocket-Protocol'] = options.protocol;\n  }\n  if (options.origin) {\n    if (options.protocolVersion < 13) {\n      requestOptions.headers['Sec-WebSocket-Origin'] = options.origin;\n    } else {\n      requestOptions.headers.Origin = options.origin;\n    }\n  }\n  if (options.host) requestOptions.headers.Host = options.host;\n  if (serverUrl.auth) requestOptions.auth = serverUrl.auth;\n\n  if (options.localAddress) requestOptions.localAddress = options.localAddress;\n  if (options.family) requestOptions.family = options.family;\n\n  if (isUnixSocket) {\n    const parts = serverUrl.path.split(':');\n\n    requestOptions.socketPath = parts[0];\n    requestOptions.path = parts[1];\n  } else if (serverUrl.path) {\n    //\n    // Make sure that path starts with `/`.\n    //\n    if (serverUrl.path.charAt(0) !== '/') {\n      requestOptions.path = `/${serverUrl.path}`;\n    } else {\n      requestOptions.path = serverUrl.path;\n    }\n  }\n\n  var agent = options.agent;\n\n  //\n  // A custom agent is required for these options.\n  //\n  if (\n    options.rejectUnauthorized != null ||\n    options.checkServerIdentity ||\n    options.passphrase ||\n    options.ciphers ||\n    options.ecdhCurve ||\n    options.cert ||\n    options.key ||\n    options.pfx ||\n    options.ca\n  ) {\n    if (options.passphrase) requestOptions.passphrase = options.passphrase;\n    if (options.ciphers) requestOptions.ciphers = options.ciphers;\n    if (options.ecdhCurve) requestOptions.ecdhCurve = options.ecdhCurve;\n    if (options.cert) requestOptions.cert = options.cert;\n    if (options.key) requestOptions.key = options.key;\n    if (options.pfx) requestOptions.pfx = options.pfx;\n    if (options.ca) requestOptions.ca = options.ca;\n    if (options.checkServerIdentity) {\n      requestOptions.checkServerIdentity = options.checkServerIdentity;\n    }\n    if (options.rejectUnauthorized != null) {\n      requestOptions.rejectUnauthorized = options.rejectUnauthorized;\n    }\n\n    if (!agent) agent = new httpObj.Agent(requestOptions);\n  }\n\n  if (agent) requestOptions.agent = agent;\n\n  this._req = httpObj.get(requestOptions);\n\n  if (options.handshakeTimeout) {\n    this._req.setTimeout(options.handshakeTimeout, () => {\n      this._req.abort();\n      this.finalize(new Error('opening handshake has timed out'));\n    });\n  }\n\n  this._req.on('error', (error) => {\n    if (this._req.aborted) return;\n\n    this._req = null;\n    this.finalize(error);\n  });\n\n  this._req.on('response', (res) => {\n    if (!this.emit('unexpected-response', this._req, res)) {\n      this._req.abort();\n      this.finalize(new Error(`unexpected server response (${res.statusCode})`));\n    }\n  });\n\n  this._req.on('upgrade', (res, socket, head) => {\n    this.emit('headers', res.headers, res);\n\n    //\n    // The user may have closed the connection from a listener of the `headers`\n    // event.\n    //\n    if (this.readyState !== WebSocket.CONNECTING) return;\n\n    this._req = null;\n\n    const digest = crypto.createHash('sha1')\n      .update(key + constants.GUID, 'binary')\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      socket.destroy();\n      return this.finalize(new Error('invalid server key'));\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (options.protocol || '').split(/, */);\n    var protError;\n\n    if (!options.protocol && serverProt) {\n      protError = 'server sent a subprotocol even though none requested';\n    } else if (options.protocol && !serverProt) {\n      protError = 'server sent no subprotocol even though requested';\n    } else if (serverProt && protList.indexOf(serverProt) === -1) {\n      protError = 'server responded with an invalid protocol';\n    }\n\n    if (protError) {\n      socket.destroy();\n      return this.finalize(new Error(protError));\n    }\n\n    if (serverProt) this.protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const serverExtensions = Extensions.parse(\n          res.headers['sec-websocket-extensions']\n        );\n\n        if (serverExtensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(\n            serverExtensions[PerMessageDeflate.extensionName]\n          );\n          this.extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        socket.destroy();\n        this.finalize(new Error('invalid Sec-WebSocket-Extensions header'));\n        return;\n      }\n    }\n\n    this.setSocket(socket, head);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/WebSocket.js","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 6\n// module chunks = 0","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * An auto incrementing id which we can use to create \"unique\" Ultron instances\n * so we can track the event emitters that are added through the Ultron\n * interface.\n *\n * @type {Number}\n * @private\n */\nvar id = 0;\n\n/**\n * Ultron is high-intelligence robot. It gathers intelligence so it can start improving\n * upon his rudimentary design. It will learn from your EventEmitting patterns\n * and exterminate them.\n *\n * @constructor\n * @param {EventEmitter} ee EventEmitter instance we need to wrap.\n * @api public\n */\nfunction Ultron(ee) {\n  if (!(this instanceof Ultron)) return new Ultron(ee);\n\n  this.id = id++;\n  this.ee = ee;\n}\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @returns {Ultron}\n * @api public\n */\nUltron.prototype.on = function on(event, fn, context) {\n  fn.__ultron = this.id;\n  this.ee.on(event, fn, context);\n\n  return this;\n};\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @returns {Ultron}\n * @api public\n */\nUltron.prototype.once = function once(event, fn, context) {\n  fn.__ultron = this.id;\n  this.ee.once(event, fn, context);\n\n  return this;\n};\n\n/**\n * Remove the listeners we assigned for the given event.\n *\n * @returns {Ultron}\n * @api public\n */\nUltron.prototype.remove = function remove() {\n  var args = arguments\n    , ee = this.ee\n    , event;\n\n  //\n  // When no event names are provided we assume that we need to clear all the\n  // events that were assigned through us.\n  //\n  if (args.length === 1 && 'string' === typeof args[0]) {\n    args = args[0].split(/[, ]+/);\n  } else if (!args.length) {\n    if (ee.eventNames) {\n      args = ee.eventNames();\n    } else if (ee._events) {\n      args = [];\n\n      for (event in ee._events) {\n        if (has.call(ee._events, event)) args.push(event);\n      }\n\n      if (Object.getOwnPropertySymbols) {\n        args = args.concat(Object.getOwnPropertySymbols(ee._events));\n      }\n    }\n  }\n\n  for (var i = 0; i < args.length; i++) {\n    var listeners = ee.listeners(args[i]);\n\n    for (var j = 0; j < listeners.length; j++) {\n      event = listeners[j];\n\n      //\n      // Once listeners have a `listener` property that stores the real listener\n      // in the EventEmitter that ships with Node.js.\n      //\n      if (event.listener) {\n        if (event.listener.__ultron !== this.id) continue;\n      } else if (event.__ultron !== this.id) {\n        continue;\n      }\n\n      ee.removeListener(args[i], event);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Destroy the Ultron instance, remove all listeners and release all references.\n *\n * @returns {Boolean}\n * @api public\n */\nUltron.prototype.destroy = function destroy() {\n  if (!this.ee) return false;\n\n  this.remove();\n  this.ee = null;\n\n  return true;\n};\n\n//\n// Expose the module.\n//\nmodule.exports = Ultron;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ultron/index.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 9\n// module chunks = 0","\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs')\n  , path = require('path')\n  , join = path.join\n  , dirname = path.dirname\n  , exists = ((fs.accessSync && function (path) { try { fs.accessSync(path); } catch (e) { return false; } return true; })\n      || fs.existsSync || path.existsSync)\n  , defaults = {\n        arrow: process.env.NODE_BINDINGS_ARROW || '  '\n      , compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled'\n      , platform: process.platform\n      , arch: process.arch\n      , version: process.versions.node\n      , bindings: 'bindings.node'\n      , try: [\n          // node-gyp's linked version in the \"build\" dir\n          [ 'module_root', 'build', 'bindings' ]\n          // node-waf and gyp_addon (a.k.a node-gyp)\n        , [ 'module_root', 'build', 'Debug', 'bindings' ]\n        , [ 'module_root', 'build', 'Release', 'bindings' ]\n          // Debug files, for development (legacy behavior, remove for node v0.9)\n        , [ 'module_root', 'out', 'Debug', 'bindings' ]\n        , [ 'module_root', 'Debug', 'bindings' ]\n          // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n        , [ 'module_root', 'out', 'Release', 'bindings' ]\n        , [ 'module_root', 'Release', 'bindings' ]\n          // Legacy from node-waf, node <= 0.4.x\n        , [ 'module_root', 'build', 'default', 'bindings' ]\n          // Production \"Release\" buildtype binary (meh...)\n        , [ 'module_root', 'compiled', 'version', 'platform', 'arch', 'bindings' ]\n        ]\n    }\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings (opts) {\n\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts }\n  } else if (!opts) {\n    opts = {}\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName())\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node'\n  }\n\n  var tries = []\n    , i = 0\n    , l = opts.try.length\n    , n\n    , b\n    , err\n\n  for (; i<l; i++) {\n    n = join.apply(null, opts.try[i].map(function (p) {\n      return opts[p] || p\n    }))\n    tries.push(n)\n    try {\n      b = opts.path ? require.resolve(n) : require(n)\n      if (!opts.path) {\n        b.path = n\n      }\n      return b\n    } catch (e) {\n      if (!/not find/i.test(e.message)) {\n        throw e\n      }\n    }\n  }\n\n  err = new Error('Could not locate the bindings file. Tried:\\n'\n    + tries.map(function (a) { return opts.arrow + a }).join('\\n'))\n  err.tries = tries\n  throw err\n}\nmodule.exports = exports = bindings\n\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName (calling_file) {\n  var origPST = Error.prepareStackTrace\n    , origSTL = Error.stackTraceLimit\n    , dummy = {}\n    , fileName\n\n  Error.stackTraceLimit = 10\n\n  Error.prepareStackTrace = function (e, st) {\n    for (var i=0, l=st.length; i<l; i++) {\n      fileName = st[i].getFileName()\n      if (fileName !== __filename) {\n        if (calling_file) {\n            if (fileName !== calling_file) {\n              return\n            }\n        } else {\n          return\n        }\n      }\n    }\n  }\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy)\n  dummy.stack\n\n  // cleanup\n  Error.prepareStackTrace = origPST\n  Error.stackTraceLimit = origSTL\n\n  return fileName\n}\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot (file) {\n  var dir = dirname(file)\n    , prev\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd()\n    }\n    if (exists(join(dir, 'package.json')) || exists(join(dir, 'node_modules'))) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error('Could not find module root given file: \"' + file\n                    + '\". Do you have a `package.json` file? ')\n    }\n    // Try the parent dir next\n    prev = dir\n    dir = join(dir, '..')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/bindings/bindings.js","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 11;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bindings\n// module id = 11\n// module chunks = 0","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push (dest, name, elem) {\n  if (Object.prototype.hasOwnProperty.call(dest, name)) dest[name].push(elem);\n  else dest[name] = [elem];\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse (header) {\n  const offers = {};\n\n  if (header === undefined || header === '') return offers;\n\n  var params = {};\n  var mustUnescape = false;\n  var isEscaping = false;\n  var inQuotes = false;\n  var extensionName;\n  var paramName;\n  var start = -1;\n  var end = -1;\n\n  for (var i = 0; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20/* ' ' */|| code === 0x09/* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b/* ';' */ || code === 0x2c/* ',' */) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = {};\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d/* '=' */&& start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new Error(`unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22/* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c/* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new Error(`unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        var value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) throw new Error('unexpected end of input');\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, {});\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Serializes a parsed `Sec-WebSocket-Extensions` header to a string.\n *\n * @param {Object} value The object to format\n * @return {String} A string representing the given value\n * @public\n */\nfunction format (value) {\n  return Object.keys(value).map((token) => {\n    var paramsList = value[token];\n    if (!Array.isArray(paramsList)) paramsList = [paramsList];\n    return paramsList.map((params) => {\n      return [token].concat(Object.keys(params).map((k) => {\n        var p = params[k];\n        if (!Array.isArray(p)) p = [p];\n        return p.map((v) => v === true ? k : `${k}=${v}`).join('; ');\n      })).join('; ');\n    }).join(', ');\n  }).join(', ');\n}\n\nmodule.exports = { format, parse };\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/Extensions.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst safeBuffer = require('safe-buffer');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst isValidUTF8 = require('./Validation');\nconst bufferUtil = require('./BufferUtil');\nconst ErrorCodes = require('./ErrorCodes');\nconst constants = require('./Constants');\n\nconst Buffer = safeBuffer.Buffer;\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n */\nclass Receiver {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} extensions An object containing the negotiated extensions\n   * @param {Number} maxPayload The maximum allowed message length\n   * @param {String} binaryType The type for binary data\n   */\n  constructor (extensions, maxPayload, binaryType) {\n    this._binaryType = binaryType || constants.BINARY_TYPES[0];\n    this._extensions = extensions || {};\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._mask = null;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._cleanupCallback = null;\n    this._hadError = false;\n    this._dead = false;\n    this._loop = false;\n\n    this.onmessage = null;\n    this.onclose = null;\n    this.onerror = null;\n    this.onping = null;\n    this.onpong = null;\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Consumes bytes from the available buffered data.\n   *\n   * @param {Number} bytes The number of bytes to consume\n   * @return {Buffer} Consumed bytes\n   * @private\n   */\n  readBuffer (bytes) {\n    var offset = 0;\n    var dst;\n    var l;\n\n    this._bufferedBytes -= bytes;\n\n    if (bytes === this._buffers[0].length) return this._buffers.shift();\n\n    if (bytes < this._buffers[0].length) {\n      dst = this._buffers[0].slice(0, bytes);\n      this._buffers[0] = this._buffers[0].slice(bytes);\n      return dst;\n    }\n\n    dst = Buffer.allocUnsafe(bytes);\n\n    while (bytes > 0) {\n      l = this._buffers[0].length;\n\n      if (bytes >= l) {\n        this._buffers[0].copy(dst, offset);\n        offset += l;\n        this._buffers.shift();\n      } else {\n        this._buffers[0].copy(dst, offset, 0, bytes);\n        this._buffers[0] = this._buffers[0].slice(bytes);\n      }\n\n      bytes -= l;\n    }\n\n    return dst;\n  }\n\n  /**\n   * Checks if the number of buffered bytes is bigger or equal than `n` and\n   * calls `cleanup` if necessary.\n   *\n   * @param {Number} n The number of bytes to check against\n   * @return {Boolean} `true` if `bufferedBytes >= n`, else `false`\n   * @private\n   */\n  hasBufferedBytes (n) {\n    if (this._bufferedBytes >= n) return true;\n\n    this._loop = false;\n    if (this._dead) this.cleanup(this._cleanupCallback);\n    return false;\n  }\n\n  /**\n   * Adds new data to the parser.\n   *\n   * @public\n   */\n  add (data) {\n    if (this._dead) return;\n\n    this._bufferedBytes += data.length;\n    this._buffers.push(data);\n    this.startLoop();\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @private\n   */\n  startLoop () {\n    this._loop = true;\n\n    while (this._loop) {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData();\n          break;\n        default: // `INFLATING`\n          this._loop = false;\n      }\n    }\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @private\n   */\n  getInfo () {\n    if (!this.hasBufferedBytes(2)) return;\n\n    const buf = this.readBuffer(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this.error(new Error('RSV2 and RSV3 must be clear'), 1002);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this.error(new Error('RSV1 must be clear'), 1002);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this.error(new Error('RSV1 must be clear'), 1002);\n        return;\n      }\n\n      if (!this._fragmented) {\n        this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n        return;\n      } else {\n        this._opcode = this._fragmented;\n      }\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this.error(new Error('FIN must be set'), 1002);\n        return;\n      }\n\n      if (compressed) {\n        this.error(new Error('RSV1 must be clear'), 1002);\n        return;\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this.error(new Error('invalid payload length'), 1002);\n        return;\n      }\n    } else {\n      this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @private\n   */\n  getPayloadLength16 () {\n    if (!this.hasBufferedBytes(2)) return;\n\n    this._payloadLength = this.readBuffer(2).readUInt16BE(0, true);\n    this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @private\n   */\n  getPayloadLength64 () {\n    if (!this.hasBufferedBytes(8)) return;\n\n    const buf = this.readBuffer(8);\n    const num = buf.readUInt32BE(0, true);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this.error(new Error('max payload size exceeded'), 1009);\n      return;\n    }\n\n    this._payloadLength = (num * Math.pow(2, 32)) + buf.readUInt32BE(4, true);\n    this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @private\n   */\n  haveLength () {\n    if (this._opcode < 0x08 && this.maxPayloadExceeded(this._payloadLength)) {\n      return;\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask () {\n    if (!this.hasBufferedBytes(4)) return;\n\n    this._mask = this.readBuffer(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @private\n   */\n  getData () {\n    var data = constants.EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (!this.hasBufferedBytes(this._payloadLength)) return;\n\n      data = this.readBuffer(this._payloadLength);\n      if (this._masked) bufferUtil.unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data);\n    } else if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data);\n    } else if (this.pushFragment(data)) {\n      this.dataMessage();\n    }\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @private\n   */\n  decompress (data) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) {\n        this.error(err, err.closeCode === 1009 ? 1009 : 1007);\n        return;\n      }\n\n      if (this.pushFragment(buf)) this.dataMessage();\n      this.startLoop();\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @private\n   */\n  dataMessage () {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        var data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = toBuffer(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(toBuffer(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.onmessage(data);\n      } else {\n        const buf = toBuffer(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this.error(new Error('invalid utf8 sequence'), 1007);\n          return;\n        }\n\n        this.onmessage(buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @private\n   */\n  controlMessage (data) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this.onclose(1000, '');\n        this._loop = false;\n        this.cleanup(this._cleanupCallback);\n      } else if (data.length === 1) {\n        this.error(new Error('invalid payload length'), 1002);\n      } else {\n        const code = data.readUInt16BE(0, true);\n\n        if (!ErrorCodes.isValidErrorCode(code)) {\n          this.error(new Error(`invalid status code: ${code}`), 1002);\n          return;\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          this.error(new Error('invalid utf8 sequence'), 1007);\n          return;\n        }\n\n        this.onclose(code, buf.toString());\n        this._loop = false;\n        this.cleanup(this._cleanupCallback);\n      }\n\n      return;\n    }\n\n    if (this._opcode === 0x09) this.onping(data);\n    else this.onpong(data);\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles an error.\n   *\n   * @param {Error} err The error\n   * @param {Number} code Close code\n   * @private\n   */\n  error (err, code) {\n    this.onerror(err, code);\n    this._hadError = true;\n    this._loop = false;\n    this.cleanup(this._cleanupCallback);\n  }\n\n  /**\n   * Checks payload size, disconnects socket when it exceeds `maxPayload`.\n   *\n   * @param {Number} length Payload length\n   * @private\n   */\n  maxPayloadExceeded (length) {\n    if (length === 0 || this._maxPayload < 1) return false;\n\n    const fullLength = this._totalPayloadLength + length;\n\n    if (fullLength <= this._maxPayload) {\n      this._totalPayloadLength = fullLength;\n      return false;\n    }\n\n    this.error(new Error('max payload size exceeded'), 1009);\n    return true;\n  }\n\n  /**\n   * Appends a fragment in the fragments array after checking that the sum of\n   * fragment lengths does not exceed `maxPayload`.\n   *\n   * @param {Buffer} fragment The fragment to add\n   * @return {Boolean} `true` if `maxPayload` is not exceeded, else `false`\n   * @private\n   */\n  pushFragment (fragment) {\n    if (fragment.length === 0) return true;\n\n    const totalLength = this._messageLength + fragment.length;\n\n    if (this._maxPayload < 1 || totalLength <= this._maxPayload) {\n      this._messageLength = totalLength;\n      this._fragments.push(fragment);\n      return true;\n    }\n\n    this.error(new Error('max payload size exceeded'), 1009);\n    return false;\n  }\n\n  /**\n   * Releases resources used by the receiver.\n   *\n   * @param {Function} cb Callback\n   * @public\n   */\n  cleanup (cb) {\n    this._dead = true;\n\n    if (!this._hadError && (this._loop || this._state === INFLATING)) {\n      this._cleanupCallback = cb;\n    } else {\n      this._extensions = null;\n      this._fragments = null;\n      this._buffers = null;\n      this._mask = null;\n\n      this._cleanupCallback = null;\n      this.onmessage = null;\n      this.onclose = null;\n      this.onerror = null;\n      this.onping = null;\n      this.onpong = null;\n\n      if (cb) cb();\n    }\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Makes a buffer from a list of fragments.\n *\n * @param {Buffer[]} fragments The list of fragments composing the message\n * @param {Number} messageLength The length of the message\n * @return {Buffer}\n * @private\n */\nfunction toBuffer (fragments, messageLength) {\n  if (fragments.length === 1) return fragments[0];\n  if (fragments.length > 1) return bufferUtil.concat(fragments, messageLength);\n  return constants.EMPTY_BUFFER;\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n */\nfunction toArrayBuffer (buf) {\n  if (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/Receiver.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nmodule.exports = {\n  isValidErrorCode: function (code) {\n    return (code >= 1000 && code <= 1013 && code !== 1004 && code !== 1005 && code !== 1006) ||\n      (code >= 3000 && code <= 4999);\n  },\n  1000: 'normal',\n  1001: 'going away',\n  1002: 'protocol error',\n  1003: 'unsupported data',\n  1004: 'reserved',\n  1005: 'reserved for extensions',\n  1006: 'reserved for extensions',\n  1007: 'inconsistent or invalid data',\n  1008: 'policy violation',\n  1009: 'message too big',\n  1010: 'extension handshake missing',\n  1011: 'an unexpected condition prevented the request from being fulfilled',\n  1012: 'service restart',\n  1013: 'try again later'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/ErrorCodes.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst safeBuffer = require('safe-buffer');\nconst crypto = require('crypto');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst bufferUtil = require('./BufferUtil');\nconst ErrorCodes = require('./ErrorCodes');\nconst constants = require('./Constants');\n\nconst Buffer = safeBuffer.Buffer;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {net.Socket} socket The connection socket\n   * @param {Object} extensions An object containing the negotiated extensions\n   */\n  constructor (socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} options.readOnly Specifies whether `data` can be modified\n   * @param {Boolean} options.fin Specifies whether or not to set the FIN bit\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Boolean} options.rsv1 Specifies whether or not to set the RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame (data, options) {\n    const merge = data.length < 1024 || (options.mask && options.readOnly);\n    var offset = options.mask ? 6 : 2;\n    var payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2, true);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2, true);\n      target.writeUInt32BE(data.length, 6, true);\n    }\n\n    if (!options.mask) {\n      target[1] = payloadLength;\n      if (merge) {\n        data.copy(target, offset);\n        return [target];\n      }\n\n      return [target, data];\n    }\n\n    const mask = crypto.randomBytes(4);\n\n    target[1] = payloadLength | 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      bufferUtil.mask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    bufferUtil.mask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {(Number|undefined)} code The status code component of the body\n   * @param {String} data The message component of the body\n   * @param {Boolean} mask Specifies whether or not to mask the message\n   * @param {Function} cb Callback\n   * @public\n   */\n  close (code, data, mask, cb) {\n    var buf;\n\n    if (code === undefined) {\n      code = 1000;\n    } else if (typeof code !== 'number' || !ErrorCodes.isValidErrorCode(code)) {\n      throw new Error('first argument must be a valid error code number');\n    }\n\n    if (data === undefined || data === '') {\n      if (code === 1000) {\n        buf = constants.EMPTY_BUFFER;\n      } else {\n        buf = Buffer.allocUnsafe(2);\n        buf.writeUInt16BE(code, 0, true);\n      }\n    } else {\n      buf = Buffer.allocUnsafe(2 + Buffer.byteLength(data));\n      buf.writeUInt16BE(code, 0, true);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @private\n   */\n  doClose (data, mask, cb) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x08,\n      mask,\n      readOnly: false\n    }), cb);\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @public\n   */\n  ping (data, mask) {\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, data, mask, readOnly]);\n    } else {\n      this.doPing(data, mask, readOnly);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Boolean} readOnly Specifies whether `data` can be modified\n   * @private\n   */\n  doPing (data, mask, readOnly) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x09,\n      mask,\n      readOnly\n    }));\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @public\n   */\n  pong (data, mask) {\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, data, mask, readOnly]);\n    } else {\n      this.doPong(data, mask, readOnly);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Specifies whether or not to mask `data`\n   * @param {Boolean} readOnly Specifies whether `data` can be modified\n   * @private\n   */\n  doPong (data, mask, readOnly) {\n    this.sendFrame(Sender.frame(data, {\n      fin: true,\n      rsv1: false,\n      opcode: 0x0a,\n      mask,\n      readOnly\n    }));\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback\n   * @public\n   */\n  send (data, options, cb) {\n    var opcode = options.binary ? 2 : 1;\n    var rsv1 = options.compress;\n    var readOnly = true;\n\n    if (!Buffer.isBuffer(data)) {\n      if (data instanceof ArrayBuffer) {\n        data = Buffer.from(data);\n      } else if (ArrayBuffer.isView(data)) {\n        data = viewToBuffer(data);\n      } else {\n        data = Buffer.from(data);\n        readOnly = false;\n      }\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = data.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(Sender.frame(data, {\n        fin: options.fin,\n        rsv1: false,\n        opcode,\n        mask: options.mask,\n        readOnly\n      }), cb);\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} compress Specifies whether or not to compress `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} options.readOnly Specifies whether `data` can be modified\n   * @param {Boolean} options.fin Specifies whether or not to set the FIN bit\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Boolean} options.rsv1 Specifies whether or not to set the RSV1 bit\n   * @param {Function} cb Callback\n   * @private\n   */\n  dispatch (data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this._deflating = false;\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue () {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      params[0].apply(this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue (params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} cb Callback\n   * @private\n   */\n  sendFrame (list, cb) {\n    if (list.length === 2) {\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Converts an `ArrayBuffer` view into a buffer.\n *\n * @param {(DataView|TypedArray)} view The view to convert\n * @return {Buffer} Converted view\n * @private\n */\nfunction viewToBuffer (view) {\n  const buf = Buffer.from(view.buffer);\n\n  if (view.byteLength !== view.buffer.byteLength) {\n    return buf.slice(view.byteOffset, view.byteOffset + view.byteLength);\n  }\n\n  return buf;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/Sender.js","import WebSocket from 'ws';\n\nlet wss = null;\nlet clientId = 0;\n\nfunction server (port) {\n  return new Promise((resolve, reject) => {\n    port = port || 8080;\n\n    wss = new WebSocket.Server({ port: port });\n\n    wss.on('connection', function connection (ws) {\n      clientId++;\n      console.log('new client connected: #' + clientId + '\\n');\n\n      ws.id = clientId;\n      ws.isAlive = true;\n\n      ws.on('pong', function heartbeat() {\n        this.isAlive = true;\n      });\n\n      ws.on('message', function (message) {\n        const msg = JSON.parse(message);\n\n        if (ws.isClosed) {\n          console.log('server-received (ws.closed): '+ message + '\\n');\n          return;\n        }\n\n        console.log('server-received: ' + message + '\\n');\n\n        if (msg.cmd === 'close') {\n          close(ws, 'CLIENT-INITIATED');\n        }\n      });\n\n      ws.on('error', e => {\n        close(ws, 'ECONNRESET');\n      })\n\n      ws.send(JSON.stringify({ cmd: 'id.set', value: clientId }));\n    });\n\n    wss.on('error', e => {\n      console.log('wss-error', e.stack)\n    });\n\n    wss.on('close', function (code, reason) {\n      console.log('close', code, reason);\n    });\n\n    console.log('------------------------------\\nTrace Server started on port: ' + port + '\\n');;\n\n    // pollPurgeBrokenConnections();\n\n    resolve(wss);\n  });\n}\n\nfunction close (ws, reason) {\n  console.log('closed client connection: #' + ws.id + ' (' + reason + ')\\n');\n  ws.terminate();\n  ws.isClosed = true;\n}\n\nfunction pollPurgeBrokenConnections (intervalMs) {\n  intervalMs = intervalMs || 10;\n  const interval = setInterval(function ping () {\n    wss.clients.forEach(function (ws) {\n      if (ws.isAlive === false) {\n        console.log('terminating: ' + ws.id);\n        return ws.terminate();\n      }\n  \n      ws.isAlive = false;\n      ws.ping('', false, true);\n    });\n  }, intervalMs);\n}\n\nexport default server;\n\n\n// WEBPACK FOOTER //\n// ./src/server/index.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst WebSocket = require('./lib/WebSocket');\n\nWebSocket.Server = require('./lib/WebSocketServer');\nWebSocket.Receiver = require('./lib/Receiver');\nWebSocket.Sender = require('./lib/Sender');\n\nmodule.exports = WebSocket;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/index.js","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"buffer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"buffer\"\n// module id = 19\n// module chunks = 0","'use strict';\n\nfunction Queue(options) {\n  if (!(this instanceof Queue)) {\n    return new Queue(options);\n  }\n\n  options = options || {};\n  this.concurrency = options.concurrency || Infinity;\n  this.pending = 0;\n  this.jobs = [];\n  this.cbs = [];\n  this._done = done.bind(this);\n}\n\nvar arrayAddMethods = [\n  'push',\n  'unshift',\n  'splice'\n];\n\narrayAddMethods.forEach(function(method) {\n  Queue.prototype[method] = function() {\n    var methodResult = Array.prototype[method].apply(this.jobs, arguments);\n    this._run();\n    return methodResult;\n  };\n});\n\nObject.defineProperty(Queue.prototype, 'length', {\n  get: function() {\n    return this.pending + this.jobs.length;\n  }\n});\n\nQueue.prototype._run = function() {\n  if (this.pending === this.concurrency) {\n    return;\n  }\n  if (this.jobs.length) {\n    var job = this.jobs.shift();\n    this.pending++;\n    job(this._done);\n    this._run();\n  }\n\n  if (this.pending === 0) {\n    while (this.cbs.length !== 0) {\n      var cb = this.cbs.pop();\n      process.nextTick(cb);\n    }\n  }\n};\n\nQueue.prototype.onDone = function(cb) {\n  if (typeof cb === 'function') {\n    this.cbs.push(cb);\n    this._run();\n  }\n};\n\nfunction done() {\n  this.pending--;\n  this._run();\n}\n\nmodule.exports = Queue;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/async-limiter/index.js","module.exports = require(\"zlib\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zlib\"\n// module id = 21\n// module chunks = 0","'use strict';\n\ntry {\n  module.exports = require('bindings')('bufferutil');\n} catch (e) {\n  module.exports = require('./fallback');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/bufferutil/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 24\n// module chunks = 0","/*!\n * bufferutil: WebSocket buffer utils\n * Copyright(c) 2015 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/bufferutil/fallback.js","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was dispatched\n   */\n  constructor (type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being closed\n   * @param {String} reason A human-readable string explaining why the connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was dispatched\n   */\n  constructor (target) {\n    super('open', target);\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} method A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @public\n   */\n  addEventListener (method, listener) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage (data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose (code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError (event) {\n      event.type = 'error';\n      event.target = this;\n      listener.call(this, event);\n    }\n\n    function onOpen () {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    if (method === 'message') {\n      onMessage._listener = listener;\n      this.on(method, onMessage);\n    } else if (method === 'close') {\n      onClose._listener = listener;\n      this.on(method, onClose);\n    } else if (method === 'error') {\n      onError._listener = listener;\n      this.on(method, onError);\n    } else if (method === 'open') {\n      onOpen._listener = listener;\n      this.on(method, onOpen);\n    } else {\n      this.on(method, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} method A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener (method, listener) {\n    const listeners = this.listeners(method);\n\n    for (var i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(method, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/EventTarget.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  module.exports = typeof isValidUTF8 === 'object'\n    ? isValidUTF8.Validation.isValidUTF8 // utf-8-validate@<3.0.0\n    : isValidUTF8;\n} catch (e) /* istanbul ignore next */ {\n  module.exports = () => true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/Validation.js","'use strict';\n\ntry {\n  module.exports = require('bindings')('validation');\n} catch (e) {\n  module.exports = require('./fallback');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/utf-8-validate/index.js","/*!\n * UTF-8 validate: UTF-8 validation for WebSockets.\n * Copyright(c) 2015 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nconst isValidUTF8 = (buf) => {\n  var len = buf.length;\n  var i = 0;\n\n  while (i < len) {\n    if (buf[i] < 0x80) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      } else {\n        i += 2;\n      }\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0     // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      } else {\n        i += 3;\n      }\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      } else {\n        i += 4;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nmodule.exports = isValidUTF8;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/utf-8-validate/fallback.js","/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst safeBuffer = require('safe-buffer');\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst Ultron = require('ultron');\nconst http = require('http');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst Extensions = require('./Extensions');\nconst constants = require('./Constants');\nconst WebSocket = require('./WebSocket');\n\nconst Buffer = safeBuffer.Buffer;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {String} options.host The hostname where to bind the server\n   * @param {Number} options.port The port where to bind the server\n   * @param {http.Server} options.server A pre-created HTTP/S server to use\n   * @param {Function} options.verifyClient An hook to reject connections\n   * @param {Function} options.handleProtocols An hook to handle protocols\n   * @param {String} options.path Accept only connections matching this path\n   * @param {Boolean} options.noServer Enable no server mode\n   * @param {Boolean} options.clientTracking Specifies whether or not to track clients\n   * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n   * @param {Number} options.maxPayload The maximum allowed message size\n   * @param {Function} callback A listener for the `listening` event\n   */\n  constructor (options, callback) {\n    super();\n\n    options = Object.assign({\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null\n    }, options);\n\n    if (options.port == null && !options.server && !options.noServer) {\n      throw new TypeError('missing or invalid options');\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(options.port, options.host, options.backlog, callback);\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      this._ultron = new Ultron(this._server);\n      this._ultron.on('listening', () => this.emit('listening'));\n      this._ultron.on('error', (err) => this.emit('error', err));\n      this._ultron.on('upgrade', (req, socket, head) => {\n        this.handleUpgrade(req, socket, head, (client) => {\n          this.emit('connection', client, req);\n        });\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} cb Callback\n   * @public\n   */\n  close (cb) {\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._ultron.destroy();\n      this._ultron = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) return server.close(cb);\n    }\n\n    if (cb) cb();\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle (req) {\n    if (this.options.path && url.parse(req.url).pathname !== this.options.path) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade (req, socket, head, cb) {\n    socket.on('error', socketError);\n\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' || req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !req.headers['sec-websocket-key'] || (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortConnection(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = Extensions.parse(\n          req.headers['sec-websocket-extensions']\n        );\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortConnection(socket, 400);\n      }\n    }\n\n    var protocol = (req.headers['sec-websocket-protocol'] || '').split(/, */);\n\n    //\n    // Optionally call external protocol selection handler.\n    //\n    if (this.options.handleProtocols) {\n      protocol = this.options.handleProtocols(protocol, req);\n      if (protocol === false) return abortConnection(socket, 401);\n    } else {\n      protocol = protocol[0];\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin: req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.connection.authorized || req.connection.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message) => {\n          if (!verified) return abortConnection(socket, code || 401, message);\n\n          this.completeUpgrade(\n            protocol,\n            extensions,\n            version,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortConnection(socket, 401);\n    }\n\n    this.completeUpgrade(protocol, extensions, version, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} protocol The chosen subprotocol\n   * @param {Object} extensions The accepted extensions\n   * @param {Number} version The WebSocket protocol version\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @private\n   */\n  completeUpgrade (protocol, extensions, version, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    const key = crypto.createHash('sha1')\n      .update(req.headers['sec-websocket-key'] + constants.GUID, 'binary')\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${key}`\n    ];\n\n    if (protocol) headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = Extensions.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n\n    const client = new WebSocket([socket, head], null, {\n      maxPayload: this.options.maxPayload,\n      protocolVersion: version,\n      extensions,\n      protocol\n    });\n\n    if (this.clients) {\n      this.clients.add(client);\n      client.on('close', () => this.clients.delete(client));\n    }\n\n    socket.removeListener('error', socketError);\n    cb(client);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketError () {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {net.Socket} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @private\n */\nfunction abortConnection (socket, code, message) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      'Connection: close\\r\\n' +\n      'Content-type: text/html\\r\\n' +\n      `Content-Length: ${Buffer.byteLength(message)}\\r\\n` +\n      '\\r\\n' +\n      message\n    );\n  }\n\n  socket.removeListener('error', socketError);\n  socket.destroy();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/ws/lib/WebSocketServer.js"],"sourceRoot":""}