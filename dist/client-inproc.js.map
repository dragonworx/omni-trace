{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c586b710fce3d2a1f3d3","webpack:///external \"blessed\"","webpack:///./src/server/trace-client-inproc.js","webpack:///./src/server/local.js","webpack:///./src/server/ui/index.js","webpack:///external \"blessed-contrib\"","webpack:///./src/server/ui/input.js","webpack:///./src/server/ui/output.js","webpack:///./src/server/ui/log.js"],"names":["trace","server","start","args","clientId","data","LocalServer","buffer","port","log","event","bufferedEvent","time","Date","now","JSON","stringify","push","screen","smartCSR","dockBorders","program","key","ch","process","exit","borderStyle","type","fg","labelStyle","bold","logBox","box","parent","style","bg","label","border","outputLogger","tags","scrollback","scrollbar","track","inverse","keys","mouse","inspectorBox","clientsBox","onResize","width","height","mx","Math","round","my","left","top","render","on","output","console","apply","arguments","Input","opts","value","onAccept","clickable","focus","blur","onMouseDown","hasFocus","onKeyPress","acceptHandler","split","cursorPos","length","sequence","name","ctrl","meta","shift","full","insert","splice","setCursorPos","char","pos","content","slice","setContent","join","min","x","aleft","Output","logger","textMessage","Log","input"],"mappings":"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","file":"client-inproc.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trace\"] = factory();\n\telse\n\t\troot[\"trace\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c586b710fce3d2a1f3d3","module.exports = require(\"blessed\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"blessed\"\n// module id = 0\n// module chunks = 0","import LocalServer from './local';\n\nconst server = new LocalServer();\nserver.start();\n\nexport default function trace (...args) {\n  server.trace({\n    clientId: 1,\n    data: args\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/trace-client-inproc.js","import { output } from './ui';\n\nexport default class LocalServer {\n  constructor () {\n    this.buffer = [];\n  }\n\n  start (port) {\n    output.log(`Trace Server started on port: {bold}${port ? port : 'in-proc'}{/}`)\n  }\n\n  trace (event) {\n    const bufferedEvent = {\n      ...event,\n      time: Date.now()\n    }\n    output.log(`{bold}trace:{/} ${JSON.stringify(bufferedEvent)}`);\n    this.buffer.push(bufferedEvent);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/local.js","import blessed from 'blessed';\nimport contrib from 'blessed-contrib';\nimport Log from './log';\nimport Output from './output';\n\nconst screen = blessed.screen({\n  smartCSR: true,\n  dockBorders: true,\n});\n\nconst program = blessed.program();\n\nscreen.key(['C-c'], function(ch, key) {\n  return process.exit(0);\n});\n\nconst borderStyle = {\n  type: 'line', \n  fg: 'cyan',\n};\n\nconst labelStyle = {\n  bold: true,\n};\n\nconst logBox = blessed.box({\n  parent: screen,\n  style: {\n    bg: 'black',\n    label: labelStyle,\n  },\n  border: borderStyle,\n  label: 'Log',\n});\n\nconst outputLogger = blessed.log({\n  parent: screen,\n  style: {\n    fg: 'green',\n    bg: 'black',\n    label: labelStyle,\n  },\n  border: borderStyle,\n  label: 'Output',\n  tags: true,\n  scrollback: 100,\n  scrollbar: {\n    ch: ' ',\n    track: {\n      bg: 'grey'\n    },\n    style: {\n      inverse: true\n    }\n  },\n  keys: true,\n  mouse: true,\n});\n\nconst inspectorBox = blessed.box({\n  parent: screen,\n  style: {\n    bg: 'red',\n    label: labelStyle,\n  },\n  border: borderStyle,\n  label: 'Inspector',\n});\n\nconst clientsBox = blessed.box({\n  parent: screen,\n  style: {\n    bg: 'green',\n    label: labelStyle,\n  },\n  border: borderStyle,\n  label: 'Clients',\n});\n\nconst onResize = () => {\n  const { width, height } = screen;\n  const mx = Math.round(width * 0.7);\n  const my = Math.round(height * 0.7);\n\n  logBox.left = 0;\n  logBox.top = 0;\n  logBox.width = mx + 1;\n  logBox.height = my + 1;\n\n  outputLogger.left = 0;\n  outputLogger.top = my;\n  outputLogger.width = mx + 1;\n  outputLogger.height = height - my;\n\n  inspectorBox.left = mx;\n  inspectorBox.top = 0;\n  inspectorBox.width = width - mx;\n  inspectorBox.height = my + 1;\n\n  clientsBox.left = mx;\n  clientsBox.top = my;\n  clientsBox.width = width - mx;\n  clientsBox.height = height - my;\n\n  screen.render();\n};\n\nscreen.on('resize', onResize);\n\nonResize();\n\nexport const output = new Output(outputLogger);\nexport const log = new Log(logBox);\n\n\n// WEBPACK FOOTER //\n// ./src/server/ui/index.js","module.exports = require(\"blessed-contrib\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"blessed-contrib\"\n// module id = 4\n// module chunks = 0","import blessed from 'blessed';\n\nconst log = function () { console.log.apply(console, arguments) };\n\nexport default class Input {\n  hasFocus = false;\n  buffer = [];\n  cursorPos = 0;\n  acceptHandler = () => {};\n\n  constructor (opts) {\n    const {\n      parent,\n      top = 0,\n      left = 0,\n      width = '100%',\n      bg = 'blue',\n      fg = 'white',\n      value,\n      onAccept,\n    } = opts;\n    const screen = parent.screen;\n\n    const box = blessed.box({\n      parent: parent,\n      left,\n      top,\n      width,\n      height: 1,\n      style: {\n        fg,\n        bg,\n      },\n      tags: true,\n      clickable: true,\n    });\n\n    box.on('focus', () => this.focus());\n    box.on('blur', () => this.blur());\n    box.on('mousedown', this.onMouseDown);\n\n    screen.on('keypress', (key, event) => {\n      if (this.hasFocus) {\n        this.onKeyPress(event);\n      }\n    });\n\n    this.box = box;\n    this.screen = screen;\n    this.acceptHandler = onAccept || this.acceptHandler;\n\n    if (value) {\n      this.buffer = value.split('');\n      this.cursorPos = value.length;\n      this.render();\n    }\n\n  }\n\n  onMouseDown = (mouse) => {\n    const { box, buffer } = this;\n    this.setCursorPos(Math.min(mouse.x - box.aleft, buffer.length));\n  }\n\n  onKeyPress (event) {\n    const {\n      sequence,\n      name,\n      ctrl,\n      meta,\n      shift,\n      full,\n      ch\n    } = event;\n    const {\n      buffer,\n      cursorPos\n    } = this;\n    if (sequence && sequence === name) {\n      this.insert(name);\n    } else if (ch) {\n      this.insert(ch);\n    } else if (name === 'space') {\n      this.insert(' ');\n    } else if (name === 'left' && cursorPos > 0) {\n      this.cursorPos--;\n      this.render();\n    } else if (name === 'right' && cursorPos < buffer.length) {\n      this.cursorPos++;\n      this.render();\n    } else if (name === 'backspace' && cursorPos > 0) {\n      this.buffer.splice(cursorPos - 1, 1);\n      this.setCursorPos(cursorPos - 1);\n    } else if (name === 'delete' && buffer.length > 0) {\n      this.buffer.splice(cursorPos, 1);\n      this.render();\n    } else if (name === 'home') {\n      this.setCursorPos(0);\n    } else if (name === 'end') {\n      this.setCursorPos(buffer.length);\n    } else if (name === 'escape') {\n      this.blur();\n    } else if (name === 'return') {\n      this.acceptHandler(this.value);\n    }\n  }\n\n  insert (char) {\n    this.buffer.splice(this.cursorPos, 0, char);\n    this.cursorPos++;\n    this.render();\n  }\n\n  focus () {\n    if (!this.hasFocus) {\n      this.hasFocus = true;\n      this.render();\n    }\n  }\n\n  blur () {\n    if (this.hasFocus) {\n      this.hasFocus = false;\n      this.render();\n    }\n  }\n\n  setCursorPos (pos) {\n    this.cursorPos = pos;\n    this.render();\n  }\n\n  render () {\n    const { buffer, box, screen, cursorPos } = this;\n    let content = buffer.slice();\n    if (this.hasFocus) {\n      content[cursorPos] = `{${box.style.bg}-fg}{${box.style.fg}-bg}${content[cursorPos] || ' '}{/}`;\n    }\n    box.setContent(content.join(''));\n    screen.render();\n  }\n\n  get value () {\n    return this.buffer.join('');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/ui/input.js","import blessed from 'blessed';\n\nexport default class Output {\n  constructor (logger) {\n    this.logger = logger;\n  }\n\n  log (textMessage) {\n    this.logger.log(textMessage);\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/server/ui/output.js","import blessed from 'blessed';\nimport Input from './input';\n\nexport default class Log {\n  constructor (box) {\n    this.box = box;\n\n    const input = new Input({\n      parent: box,\n      value: 'abcdefg',\n      width: '100%-2',\n      onAccept (value) {\n        console.log(value);\n      }\n    });\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/server/ui/log.js"],"sourceRoot":""}